<!DOCTYPE html>

<html>
  <head>
  	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <!-- meta for facebook share -->
    <meta property="fb:app_id"        content="1691957414394781" />
    <meta property="og:url"           content="http://hackntuxweb.github.io/small/Azalea/web/" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="房子破壞王 House Destructor" />
    <meta property="og:description"   content="快來挑戰你能破壞房子到什麼程度！" />
    <meta property="og:image"         content="http://hackntuxweb.github.io/small/Azalea/web/source/share.png" />

    <!-- style -->
    <link rel="stylesheet" type="text/css" href="styles/bootstrap-3.3.6.css">
    <link rel="stylesheet" type="text/css" href="styles/main_style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <title>House Destructor</title>
    <link rel="shortcut icon" href="source/logo.png"/>
  </head>
 
  <body>     
    <!-- facebook -->
    <div id="fb-root"></div>
    <script>
      var myAppId = '1691957414394781';
      var uid;
      var accessToken;
      var login = false;

      window.fbAsyncInit = function() {
        FB.init({
          appId      : myAppId,
          xfbml      : true,
          version    : 'v2.5',
          channelUrl : 'http://hackntuxweb.github.io/small/Azalea/web/'
        });

        FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
            login = true;
            //close login madol
            var loginModalElement = document.getElementById("loginModal");
            loginModalElement.className += " hidden";
            //get id
            uid = response.authResponse.userID;
            accessToken = response.authResponse.accessToken;
            // console.log("uid: " + uid);
            // console.log("token: " + accessToken);
          }
        });
      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));

      function FBlogin() {
        if (!login) {
          FB.login(function(response) {
            login = true;
            //get id
            if (response.authResponse) {
              uid = response.authResponse.userID;
              accessToken = response.authResponse.accessToken;
              // console.log("uid: " + uid);
              // console.log("token: " + accessToken);
            }
          },  {scope: 'publish_actions, user_friends'});
        }
      }

      function FBGetOwnScore(handler) {
        FB.api(
          "/" + uid + "/scores",
          handler
        );
      }

      function FBupdateSore(newScore, handler) {
        FB.api(
          "/" + uid + "/scores",
          "POST",
          {
            "score": newScore
          },
          handler
        );
      }

      function FBAskfriendScores(handler) {
        FB.api(
          "/" + myAppId + "/scores",
          handler
        );
      }

      function FBShareScore(score, level, commet) {
        FB.ui({
          app_id: myAppId,
          method: 'feed',
          link: 'https://hackntuxweb.github.io/small/Azalea/web/',
          caption: '房子破壞王House Destructor',
          name: '我是房子破壞王，我點了'+ score + '下！',
          description: '我破壞了' + (level * 10) + '%的房子!' + commet + '你要快來挑戰能不能完全破壞它！3/19-20來城市設計黑客松，重新建造你的城市。',
          picture: 'http://hackntuxweb.github.io/small/Azalea/web/source/share-' + level +'.png'
        }, function(response){});
      }
    </script>

    <div class="page-header">
      <h1><img src="source/logo.png" height="100" width="100" >房子破壞王<small class="en-title">House Destructor</small></h1>
    </div>
    <div class = "inner-page padd">
      <div class = "about-vedio padd">
        <div class = "container-fluid" style="width:90%">
          <!-- game canvas -->
          <div class="row">
            <div class="col-md-3 col-xs-1"></div>
            <div class="game-canvas col-md-6 col-xs-10">
              <img src="source/0.png" width="100%" class="gh-0">
              <img src="source/1.png" width="100%" class="gh-1 hidden">
              <img src="source/2.png" width="100%" class="gh-2 hidden">
              <img src="source/3.png" width="100%" class="gh-3 hidden">
              <img src="source/4.png" width="100%" class="gh-4 hidden">
              <img src="source/5.png" width="100%" class="gh-5 hidden">
              <img src="source/6.png" width="100%" class="gh-6 hidden">
              <img src="source/7.png" width="100%" class="gh-7 hidden">
              <img src="source/8.png" width="100%" class="gh-8 hidden">
              <img src="source/9.png" width="100%" class="gh-9 hidden">
              <img src="source/10.png" width="100%" class="gh-10 hidden">
            </div>
            <div class="col-md-3 col-xs-1"></div>
          </div>

          <!-- sart button -->
          <div class="row">
            <div class="col-md-3 col-xs-3"></div>
            <div class="start-button col-md-6 col-xs-6">start</div>
            <div class="col-md-3 col-xs-3"></div>
          </div>

          <!-- time display -->
          <div class="row">
            <div class="col-md-3 col-xs-3"></div>
            <div class="time-dispaly col-md-6 col-xs-6 hidden">10.0s</div>
            <div class="col-md-3 col-xs-3"></div>
          </div>

          <!-- score canvas -->
          <div class="row">
            <div class="col-md-4 col-xs-3"></div>
            <div class="score-band col-md-4 col-xs-6">0</div>
            <div class="col-md-4 col-xs-3"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Result Modal -->
    <div id="myModal" class="modal fade in hidden" role="dialog" style="display: block; padding-left: 0px;">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">YOUR SCORE</h3>
          </div>
          <div class="modal-body">
            <img src="source/1.png" class="result-picture" width="50%">
            <h4 class="result-score"></h4>
            <p class="commet"></p>
            <p class="ad"></p>
            <br>
            <div class="panel panel-default freinds-scores-panel">
              <div class="panel-body" style="padding: 0">
                <div class="panel-heading">
                  <h4 class="panel-title">Friends's Scores</h4>
                </div> 
                <ul class="list-group friends-sores-list">
                </ul>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default modal-btn share-btn"><i class="fa fa-facebook-square"></i> share</button>
            <button type="button" class="btn btn-default modal-btn restart-btn">restart</button>
          </div>
        </div>
      </div>
    </div>

    <!-- login Modal -->
    <div id="loginModal" class="modal fade in" role="dialog" style="display: block; padding-left: 0px;">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close close-login-modal" data-dismiss="modal" style="font-family: sans-serif;">&times;</button>
            <h2 class="modal-title">log in</h2>
          </div>
          <div class="modal-body">
            <div onclick="FBlogin()" class="login-btn"><i class="fa fa-facebook-square"></i></div>
          </div>
        </div>
      </div>
    </div>
    <footer>copyright &copy HackNTU</footer>

    <!-- dart -->
    <script type="application/dart" src="dart/main.dart"></script>
    <!-- for this next line to work, your pubspec.yaml file must have a dependency on 'browser' -->
    <script src="packages/browser/dart.js"></script>
    <!-- GA -->
  </body>
</html>